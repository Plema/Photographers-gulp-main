"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=t(require("jquery")):t(jQuery)}(function(h){function s(t){var e=t.clone().css({height:"auto",width:t.width(),maxHeight:"none",overflow:"hidden"}).insertAfter(t),o=e.outerHeight(),i=parseInt(e.css({maxHeight:""}).css("max-height").replace(/[^-\d\.]/g,""),10),n=t.data("defaultHeight");e.remove();var a=i||t.data("collapsedHeight")||n;t.data({expandedHeight:o,maxHeight:i,collapsedHeight:a}).css({maxHeight:"none"})}function n(t,e){this.element=t,this.options=h.extend({},o,e),function(t){if(!c[t.selector]){var e=" ";t.embedCSS&&""!==t.blockCSS&&(e+=t.selector+" + [data-readmore-toggle], "+t.selector+"[data-readmore]{"+t.blockCSS+"}"),e+=t.selector+"[data-readmore]{transition: height "+t.speed+"ms;overflow: hidden;}",o=document,i=e,(n=o.createElement("style")).type="text/css",n.styleSheet?n.styleSheet.cssText=i:n.appendChild(o.createTextNode(i)),o.getElementsByTagName("head")[0].appendChild(n),c[t.selector]=!0}var o,i,n}(this.options),this._defaults=o,this._name=l,this.init(),window.addEventListener?(window.addEventListener("load",f),window.addEventListener("resize",f)):(window.attachEvent("load",f),window.attachEvent("resize",f))}var i,a,r,d,l="readmore",o={speed:100,collapsedHeight:200,heightMargin:16,moreLink:'<a href="#">Read More</a>',lessLink:'<a href="#">Close</a>',embedCSS:!0,blockCSS:"display: block; width: 100%;",startOpen:!1,blockProcessed:function(){},beforeToggle:function(){},afterToggle:function(){}},c={},p=0,f=(i=function(){h("[data-readmore]").each(function(){var t=h(this),e="true"===t.attr("aria-expanded");s(t),t.css({height:t.data(e?"expandedHeight":"collapsedHeight")})})},a=100,function(){var t=this,e=arguments,o=r&&!d;clearTimeout(d),d=setTimeout(function(){d=null,r||i.apply(t,e)},a),o&&i.apply(t,e)});n.prototype={init:function(){var e=h(this.element);e.data({defaultHeight:this.options.collapsedHeight,heightMargin:this.options.heightMargin}),s(e);var t=e.data("collapsedHeight"),o=e.data("heightMargin");if(e.outerHeight(!0)<=t+o)return this.options.blockProcessed&&"function"==typeof this.options.blockProcessed&&this.options.blockProcessed(e,!1),!0;var i,n=e.attr("id")||function(t){var e=++p;return String(null==t?"rmjs-":t)+e}(),a=this.options.startOpen?this.options.lessLink:this.options.moreLink;e.attr({"data-readmore":"","aria-expanded":this.options.startOpen,id:n}),e.after(h(a).on("click",(i=this,function(t){i.toggle(this,e[0],t)})).attr({"data-readmore-toggle":n,"aria-controls":n})),this.options.startOpen||e.css({height:t}),this.options.blockProcessed&&"function"==typeof this.options.blockProcessed&&this.options.blockProcessed(e,!0)},toggle:function(t,e,o){o&&o.preventDefault(),t||(t=h('[aria-controls="'+this.element.id+'"]')[0]),e||(e=this.element);var i,n,a=h(e),s="",r="",d=!1,l=a.data("collapsedHeight");a.height()<=l?(s=a.data("expandedHeight")+"px",r="lessLink",d=!0):(s=l,r="moreLink"),this.options.beforeToggle&&"function"==typeof this.options.beforeToggle&&this.options.beforeToggle(t,a,!d),a.css({height:s}),a.on("transitionend",(n=this,function(){n.options.afterToggle&&"function"==typeof n.options.afterToggle&&n.options.afterToggle(t,a,d),h(this).attr({"aria-expanded":d}).off("transitionend")})),h(t).replaceWith(h(this.options[r]).on("click",(i=this,function(t){i.toggle(this,e,t)})).attr({"data-readmore-toggle":a.attr("id"),"aria-controls":a.attr("id")}))},destroy:function(){h(this.element).each(function(){var t=h(this);t.attr({"data-readmore":null,"aria-expanded":null}).css({maxHeight:"",height:""}).next("[data-readmore-toggle]").remove(),t.removeData()})}},h.fn.readmore=function(e){var o=arguments,i=this.selector;return"object"==_typeof(e=e||{})?this.each(function(){if(h.data(this,"plugin_"+l)){var t=h.data(this,"plugin_"+l);t.destroy.apply(t)}e.selector=i,h.data(this,"plugin_"+l,new n(this,e))}):"string"==typeof e&&"_"!==e[0]&&"init"!==e?this.each(function(){var t=h.data(this,"plugin_"+l);t instanceof n&&"function"==typeof t[e]&&t[e].apply(t,Array.prototype.slice.call(o,1))}):void 0}});